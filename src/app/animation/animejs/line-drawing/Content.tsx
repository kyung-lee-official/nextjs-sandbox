"use client";

import anime from "animejs";
import React, { useEffect, useState } from "react";
import styled from "styled-components";

const StyledPage = styled.div`
	padding: 2rem;
	background-color: #434343;
	min-height: 100vh;
`;

const StyledContainer = styled.div`
	display: flex;
	justify-content: center;
	align-items: center;
	background-color: #8c8c8c;
	border-radius: 5px;
	min-height: 5rem;
`;

const StyledSvgContainer = styled.div`
	display: flex;
	justify-content: center;
	align-items: center;
	border-radius: 5px;
	width: 300px;
	height: 300px;
`;

const StyledTitle = styled.h1`
	color: #f0f0f0;
`;

export const Content: React.FC<any> = () => {
	const [initAnimFinished, setInitAnimFinished] = useState<boolean>(false);

	useEffect(() => {
		let initTextTimeline: any = anime.timeline();
		let initButtonTimeline: any = anime.timeline();
		initTextTimeline.add({
			targets: ".stroke-dashoffset",
			strokeDashoffset: [anime.setDashoffset, 0],
			stroke: "#1890ff",
			easing: "easeInOutSine",
			duration: 1500,
			autoplay: false,
		});
		initTextTimeline.add({
			targets: ".stroke-dashoffset",
			fill: ["#1890ff"],
			duration: 1000,
			complete: () => {
				initTextTimeline.remove("stroke-dashoffset");
			},
		});
		initButtonTimeline.add({
			targets: ".button-border",
			strokeDashoffset: [anime.setDashoffset, 0],
			stroke: "#1890ff",
			easing: "easeInOutSine",
			duration: 1500,
			autoplay: false,
		});
		initButtonTimeline.add({
			targets: ".button-border",
			strokeWidth: "3px",
			duration: 1000,
			complete: () => {
				setInitAnimFinished(true);
				initButtonTimeline.remove("button-border");
			},
		});
		initTextTimeline.play();
		initButtonTimeline.play();
	}, []);

	useEffect(() => {
		let svg = document.querySelector("svg");
		if (svg) {
			svg.addEventListener("mouseenter", (event) => {
				if (initAnimFinished) {
					anime({
						targets: "svg",
						easing: "easeInOutSine",
						scale: 1.01,
						filter: "drop-shadow(0px 0px 2px rgb(255 255 255 / 1))",
						duration: 200,
					});
					anime({
						targets: ".button-border",
						easing: "easeInOutSine",
						stroke: "#bae7ff",
						duration: 200,
					});
					anime({
						targets: ".stroke-dashoffset",
						easing: "easeInOutSine",
						stroke: "#bae7ff",
						duration: 200,
					});
					anime({
						targets: ".stroke-dashoffset",
						easing: "easeInOutSine",
						fill: "#bae7ff",
						duration: 200,
					});
				}
			});
			svg.addEventListener("mouseleave", (event) => {
				if (initAnimFinished) {
					anime({
						targets: "svg",
						easing: "easeInOutSine",
						scale: 1,
						filter: "drop-shadow(0px 0px 0px rgb(0 0 0 / 0.3))",
						duration: 200,
					});
					anime({
						targets: ".button-border",
						easing: "easeInOutSine",
						stroke: "#1890ff",
						duration: 200,
					});
					anime({
						targets: ".stroke-dashoffset",
						easing: "easeInOutSine",
						stroke: "#1890ff",
						fill: "#1890ff",
						duration: 200,
					});
				}
			});
		}
	}, [initAnimFinished]);

	return (
		<StyledPage>
			<StyledTitle>Stroke Dashoffset</StyledTitle>
			<StyledContainer>
				<StyledSvgContainer>
					<svg
						width="300"
						height="85"
						viewBox="0 0 300 85"
						fill="none"
						xmlns="http://www.w3.org/2000/svg"
					>
						<path
							className="button-border"
							d="M5 12C5 6.47715 9.47715 2 15 2H285C290.523 2 295 6.47715 295 12V72C295 77.5228 290.523 82 285 82H15C9.47716 82 5 77.5228 5 72V12Z"
						/>
						<path
							className="stroke-dashoffset"
							d="M43.5455 38H40.7273C40.5606 37.1894 40.269 36.4773 39.8523 35.8636C39.4432 35.25 38.9432 34.7348 38.3523 34.3182C37.769 33.8939 37.1212 33.5758 36.4091 33.3636C35.697 33.1515 34.9546 33.0455 34.1818 33.0455C32.7728 33.0455 31.4962 33.4015 30.3523 34.1136C29.2159 34.8258 28.3106 35.875 27.6364 37.2614C26.9697 38.6477 26.6364 40.3485 26.6364 42.3636C26.6364 44.3788 26.9697 46.0795 27.6364 47.4659C28.3106 48.8523 29.2159 49.9015 30.3523 50.6136C31.4962 51.3258 32.7728 51.6818 34.1818 51.6818C34.9546 51.6818 35.697 51.5758 36.4091 51.3636C37.1212 51.1515 37.769 50.8371 38.3523 50.4205C38.9432 49.9962 39.4432 49.4773 39.8523 48.8636C40.269 48.2424 40.5606 47.5303 40.7273 46.7273H43.5455C43.3334 47.9167 42.947 48.9811 42.3864 49.9205C41.8258 50.8598 41.1288 51.6591 40.2955 52.3182C39.4621 52.9697 38.5265 53.4659 37.4887 53.8068C36.4584 54.1477 35.3561 54.3182 34.1818 54.3182C32.197 54.3182 30.4318 53.8333 28.8864 52.8636C27.3409 51.8939 26.125 50.5152 25.2387 48.7273C24.3523 46.9394 23.9091 44.8182 23.9091 42.3636C23.9091 39.9091 24.3523 37.7879 25.2387 36C26.125 34.2121 27.3409 32.8333 28.8864 31.8636C30.4318 30.8939 32.197 30.4091 34.1818 30.4091C35.3561 30.4091 36.4584 30.5795 37.4887 30.9205C38.5265 31.2614 39.4621 31.7614 40.2955 32.4205C41.1288 33.072 41.8258 33.8674 42.3864 34.8068C42.947 35.7386 43.3334 36.803 43.5455 38Z"
						/>
						<path
							className="stroke-dashoffset"
							d="M48.0995 54V30.7273H50.9176V41.0909H63.3267V30.7273H66.1449V54H63.3267V43.5909H50.9176V54H48.0995Z"
						/>
						<path
							className="stroke-dashoffset"
							d="M74.6051 30.7273V54H71.787V30.7273H74.6051Z"
						/>
						<path
							className="stroke-dashoffset"
							d="M78.983 33.2273V30.7273H96.4375V33.2273H89.1193V54H86.3012V33.2273H78.983Z"
						/>
						<path
							className="stroke-dashoffset"
							d="M116.06 30.7273H118.878V46.1364C118.878 47.7273 118.503 49.1477 117.753 50.3977C117.01 51.6402 115.961 52.6212 114.605 53.3409C113.249 54.053 111.658 54.4091 109.832 54.4091C108.007 54.4091 106.416 54.053 105.06 53.3409C103.704 52.6212 102.651 51.6402 101.901 50.3977C101.158 49.1477 100.787 47.7273 100.787 46.1364V30.7273H103.605V45.9091C103.605 47.0455 103.855 48.0568 104.355 48.9432C104.855 49.822 105.567 50.5152 106.492 51.0227C107.423 51.5227 108.537 51.7727 109.832 51.7727C111.128 51.7727 112.242 51.5227 113.173 51.0227C114.105 50.5152 114.817 49.822 115.31 48.9432C115.81 48.0568 116.06 47.0455 116.06 45.9091V30.7273Z"
						/>
						<path
							className="stroke-dashoffset"
							d="M124.506 54V30.7273H132.642C134.263 30.7273 135.6 31.0076 136.653 31.5682C137.706 32.1212 138.491 32.8674 139.006 33.8068C139.521 34.7386 139.778 35.7727 139.778 36.9091C139.778 37.9091 139.6 38.7348 139.244 39.3864C138.896 40.0379 138.434 40.553 137.858 40.9318C137.29 41.3106 136.672 41.5909 136.006 41.7727V42C136.718 42.0455 137.434 42.2955 138.153 42.75C138.873 43.2045 139.475 43.8561 139.96 44.7045C140.445 45.553 140.688 46.5909 140.688 47.8182C140.688 48.9848 140.422 50.0341 139.892 50.9659C139.362 51.8977 138.525 52.6364 137.381 53.1818C136.237 53.7273 134.748 54 132.915 54H124.506ZM127.324 51.5H132.915C134.756 51.5 136.063 51.1439 136.835 50.4318C137.616 49.7121 138.006 48.8409 138.006 47.8182C138.006 47.0303 137.805 46.303 137.403 45.6364C137.002 44.9621 136.43 44.4242 135.688 44.0227C134.945 43.6136 134.066 43.4091 133.051 43.4091H127.324V51.5ZM127.324 40.9545H132.551C133.4 40.9545 134.165 40.7879 134.847 40.4545C135.536 40.1212 136.081 39.6515 136.483 39.0455C136.892 38.4394 137.097 37.7273 137.097 36.9091C137.097 35.8864 136.741 35.0189 136.028 34.3068C135.316 33.5871 134.188 33.2273 132.642 33.2273H127.324V40.9545Z"
						/>
						<path
							className="stroke-dashoffset"
							d="M164.955 42.3636C164.955 44.8182 164.511 46.9394 163.625 48.7273C162.739 50.5152 161.523 51.8939 159.977 52.8636C158.432 53.8333 156.667 54.3182 154.682 54.3182C152.697 54.3182 150.932 53.8333 149.386 52.8636C147.841 51.8939 146.625 50.5152 145.739 48.7273C144.852 46.9394 144.409 44.8182 144.409 42.3636C144.409 39.9091 144.852 37.7879 145.739 36C146.625 34.2121 147.841 32.8333 149.386 31.8636C150.932 30.8939 152.697 30.4091 154.682 30.4091C156.667 30.4091 158.432 30.8939 159.977 31.8636C161.523 32.8333 162.739 34.2121 163.625 36C164.511 37.7879 164.955 39.9091 164.955 42.3636ZM162.227 42.3636C162.227 40.3485 161.89 38.6477 161.216 37.2614C160.549 35.875 159.644 34.8258 158.5 34.1136C157.364 33.4015 156.091 33.0455 154.682 33.0455C153.273 33.0455 151.996 33.4015 150.852 34.1136C149.716 34.8258 148.811 35.875 148.136 37.2614C147.47 38.6477 147.136 40.3485 147.136 42.3636C147.136 44.3788 147.47 46.0795 148.136 47.4659C148.811 48.8523 149.716 49.9015 150.852 50.6136C151.996 51.3258 153.273 51.6818 154.682 51.6818C156.091 51.6818 157.364 51.3258 158.5 50.6136C159.644 49.9015 160.549 48.8523 161.216 47.4659C161.89 46.0795 162.227 44.3788 162.227 42.3636Z"
						/>
						<path
							className="stroke-dashoffset"
							d="M170.682 30.7273L176.682 40.4091H176.864L182.864 30.7273H186.182L178.864 42.3636L186.182 54H182.864L176.864 44.5H176.682L170.682 54H167.364L174.864 42.3636L167.364 30.7273H170.682Z"
						/>
						<path
							className="stroke-dashoffset"
							d="M198.849 54V30.7273H206.986C208.607 30.7273 209.944 31.0076 210.997 31.5682C212.05 32.1212 212.834 32.8674 213.349 33.8068C213.865 34.7386 214.122 35.7727 214.122 36.9091C214.122 37.9091 213.944 38.7348 213.588 39.3864C213.24 40.0379 212.777 40.553 212.202 40.9318C211.634 41.3106 211.016 41.5909 210.349 41.7727V42C211.062 42.0455 211.777 42.2955 212.497 42.75C213.217 43.2045 213.819 43.8561 214.304 44.7045C214.789 45.553 215.031 46.5909 215.031 47.8182C215.031 48.9848 214.766 50.0341 214.236 50.9659C213.706 51.8977 212.868 52.6364 211.724 53.1818C210.581 53.7273 209.092 54 207.259 54H198.849ZM201.668 51.5H207.259C209.099 51.5 210.406 51.1439 211.179 50.4318C211.959 49.7121 212.349 48.8409 212.349 47.8182C212.349 47.0303 212.149 46.303 211.747 45.6364C211.346 44.9621 210.774 44.4242 210.031 44.0227C209.289 43.6136 208.41 43.4091 207.395 43.4091H201.668V51.5ZM201.668 40.9545H206.895C207.743 40.9545 208.509 40.7879 209.19 40.4545C209.88 40.1212 210.425 39.6515 210.827 39.0455C211.236 38.4394 211.44 37.7273 211.44 36.9091C211.44 35.8864 211.084 35.0189 210.372 34.3068C209.66 33.5871 208.531 33.2273 206.986 33.2273H201.668V40.9545Z"
						/>
						<path
							className="stroke-dashoffset"
							d="M224.435 54.4091C223.329 54.4091 222.325 54.2008 221.423 53.7841C220.522 53.3598 219.806 52.75 219.276 51.9545C218.745 51.1515 218.48 50.1818 218.48 49.0455C218.48 48.0455 218.677 47.2348 219.071 46.6136C219.465 45.9848 219.991 45.4924 220.651 45.1364C221.31 44.7803 222.037 44.5152 222.832 44.3409C223.635 44.1591 224.442 44.0152 225.253 43.9091C226.313 43.7727 227.173 43.6705 227.832 43.6023C228.499 43.5265 228.984 43.4015 229.287 43.2273C229.598 43.053 229.753 42.75 229.753 42.3182V42.2273C229.753 41.1061 229.446 40.2348 228.832 39.6136C228.226 38.9924 227.306 38.6818 226.071 38.6818C224.791 38.6818 223.787 38.9621 223.06 39.5227C222.332 40.0833 221.821 40.6818 221.526 41.3182L218.98 40.4091C219.435 39.3485 220.041 38.5227 220.798 37.9318C221.563 37.3333 222.397 36.9167 223.298 36.6818C224.207 36.4394 225.101 36.3182 225.98 36.3182C226.541 36.3182 227.185 36.3864 227.912 36.5227C228.647 36.6515 229.355 36.9205 230.037 37.3295C230.726 37.7386 231.298 38.3561 231.753 39.1818C232.207 40.0076 232.435 41.1136 232.435 42.5V54H229.753V51.6364H229.617C229.435 52.0152 229.132 52.4205 228.707 52.8523C228.283 53.2841 227.719 53.6515 227.014 53.9545C226.31 54.2576 225.45 54.4091 224.435 54.4091ZM224.844 52C225.904 52 226.798 51.7917 227.526 51.375C228.26 50.9583 228.813 50.4205 229.185 49.7614C229.563 49.1023 229.753 48.4091 229.753 47.6818V45.2273C229.639 45.3636 229.389 45.4886 229.003 45.6023C228.624 45.7083 228.185 45.803 227.685 45.8864C227.192 45.9621 226.711 46.0303 226.242 46.0909C225.779 46.1439 225.404 46.1894 225.117 46.2273C224.42 46.3182 223.768 46.4659 223.162 46.6705C222.563 46.8674 222.079 47.1667 221.707 47.5682C221.344 47.9621 221.162 48.5 221.162 49.1818C221.162 50.1136 221.507 50.8182 222.196 51.2955C222.893 51.7652 223.776 52 224.844 52Z"
						/>
						<path
							className="stroke-dashoffset"
							d="M249.693 40.4545L247.284 41.1364C247.133 40.7348 246.909 40.3447 246.614 39.9659C246.326 39.5795 245.932 39.2614 245.432 39.0114C244.932 38.7614 244.292 38.6364 243.511 38.6364C242.443 38.6364 241.553 38.8826 240.841 39.375C240.136 39.8598 239.784 40.4773 239.784 41.2273C239.784 41.8939 240.027 42.4205 240.511 42.8068C240.996 43.1932 241.754 43.5152 242.784 43.7727L245.375 44.4091C246.936 44.7879 248.099 45.3674 248.864 46.1477C249.629 46.9205 250.011 47.9167 250.011 49.1364C250.011 50.1364 249.724 51.0303 249.148 51.8182C248.58 52.6061 247.784 53.2273 246.761 53.6818C245.739 54.1364 244.549 54.3636 243.193 54.3636C241.413 54.3636 239.939 53.9773 238.773 53.2045C237.606 52.4318 236.867 51.303 236.557 49.8182L239.102 49.1818C239.345 50.1212 239.803 50.8258 240.477 51.2955C241.159 51.7652 242.049 52 243.148 52C244.398 52 245.39 51.7348 246.125 51.2045C246.867 50.6667 247.239 50.0227 247.239 49.2727C247.239 48.6667 247.027 48.1591 246.602 47.75C246.178 47.3333 245.527 47.0227 244.648 46.8182L241.739 46.1364C240.14 45.7576 238.966 45.1705 238.216 44.375C237.474 43.572 237.102 42.5682 237.102 41.3636C237.102 40.3788 237.379 39.5076 237.932 38.75C238.492 37.9924 239.254 37.3977 240.216 36.9659C241.186 36.5341 242.284 36.3182 243.511 36.3182C245.239 36.3182 246.595 36.697 247.58 37.4545C248.572 38.2121 249.277 39.2121 249.693 40.4545Z"
						/>
						<path
							className="stroke-dashoffset"
							d="M254.048 54V36.5455H256.73V54H254.048ZM255.412 33.6364C254.889 33.6364 254.438 33.4583 254.06 33.1023C253.688 32.7462 253.503 32.3182 253.503 31.8182C253.503 31.3182 253.688 30.8902 254.06 30.5341C254.438 30.178 254.889 30 255.412 30C255.935 30 256.382 30.178 256.753 30.5341C257.132 30.8902 257.321 31.3182 257.321 31.8182C257.321 32.3182 257.132 32.7462 256.753 33.1023C256.382 33.4583 255.935 33.6364 255.412 33.6364Z"
						/>
						<path
							className="stroke-dashoffset"
							d="M268.733 54.3636C267.097 54.3636 265.688 53.9773 264.506 53.2045C263.324 52.4318 262.415 51.3674 261.778 50.0114C261.142 48.6553 260.824 47.1061 260.824 45.3636C260.824 43.5909 261.15 42.0265 261.801 40.6705C262.46 39.3068 263.377 38.2424 264.551 37.4773C265.733 36.7045 267.112 36.3182 268.688 36.3182C269.915 36.3182 271.021 36.5455 272.006 37C272.991 37.4545 273.797 38.0909 274.426 38.9091C275.055 39.7273 275.445 40.6818 275.597 41.7727H272.915C272.71 40.9773 272.256 40.2727 271.551 39.6591C270.854 39.0379 269.915 38.7273 268.733 38.7273C267.688 38.7273 266.771 39 265.983 39.5455C265.203 40.0833 264.593 40.8447 264.153 41.8295C263.722 42.8068 263.506 43.9545 263.506 45.2727C263.506 46.6212 263.718 47.7955 264.142 48.7955C264.574 49.7955 265.18 50.572 265.96 51.125C266.748 51.678 267.672 51.9545 268.733 51.9545C269.43 51.9545 270.063 51.8333 270.631 51.5909C271.199 51.3485 271.68 51 272.074 50.5455C272.468 50.0909 272.748 49.5455 272.915 48.9091H275.597C275.445 49.9394 275.07 50.8674 274.472 51.6932C273.881 52.5114 273.097 53.1629 272.119 53.6477C271.15 54.125 270.021 54.3636 268.733 54.3636Z"
						/>
					</svg>
				</StyledSvgContainer>
			</StyledContainer>
		</StyledPage>
	);
};
